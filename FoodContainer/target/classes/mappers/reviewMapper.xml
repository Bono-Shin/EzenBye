<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="team.project.mapper.reviewMapper" >
 	
 	<insert id="reviewInsert" parameterType="ReviewVO">
		INSERT INTO review(product_index, member_index, image, star_count, contents)
		VALUES(#{product_index}, #{member_index}, #{image}, #{star_count}, #{contents})
	</insert>
   
   	<update id="revieweOk" parameterType="String">
    	UPDATE order_product
    	SET review_YN = 'Y'
    	WHERE orderItem_index = #{orderItem_index}
    </update>
    
    <select id="reviewList" resultType="ReviewVO" parameterType="int">
        SELECT * FROM review AS r
		JOIN product AS p
		ON r.product_index = p.product_index
		WHERE r.member_index = #{member_index} and r.del_YN = 'N'
		ORDER BY review_date desc
    </select>
    
    <select id="countList" resultType="int" parameterType="int">
    	SELECT count(*) FROM review
    	WHERE member_index = #{member_index}
    </select>
</mapper>