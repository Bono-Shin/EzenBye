<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="team.project.mapper.noMemberOrdersMapper" >
 	
	<!-- 여기는 상품 구매 페이지-->
	
	<!-- 비회원 구매페이지에서 뿌려질 상품목록들 -->
	<select id="noMemberPurchaseList" resultType="CartVO" parameterType="list">
		SELECT
			brand,
			middleSort,
			thumbnail_image,
			product_name,
			COALESCE(sale_price, sale_price, origin_price) as origin_price,
			product_index
		FROM product
		<foreach collection="list" item="item" open="WHERE " separator=" OR ">
			product_index = #{item}
		</foreach>
	</select>
 	
 	<!-- 비회원 큰 단위 주문 넣는 쿼리 -->
 	<insert id="noMemberOrdersInsert" parameterType="NoMemberOrdersVO">
 		INSERT INTO no_member_orders(
 			no_member_order_index, pw, name, phone,
 			email, address, reciever, reciever_phone,
 			<if test="request != ''">
 		 		request,
 			</if>
 			delivery_free_YN, pay_price
 		)VALUES(
 			#{no_member_order_index}, #{pw}, #{name}, #{phone},
 			#{email}, #{address}, #{reciever}, #{reciever_phone},
 			<if test="request != ''">
 		 		#{request},
 			</if>
 			#{delivery_free_YN}, #{pay_price}
 		)
 	</insert>
   
</mapper>